import { Metadata } from 'next';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/lib/auth';\nimport { prisma } from '@awcrm/database';\nimport { redirect } from 'next/navigation';\nimport { PerformanceDashboard } from '@/components/performance/performance-dashboard';\n\nexport const metadata: Metadata = {\n  title: 'Performance Dashboard',\n  description: 'Monitor system performance and optimization opportunities',\n};\n\nasync function checkPerformanceAccess() {\n  const session = await getServerSession(authOptions);\n  \n  if (!session?.user?.id) {\n    return null;\n  }\n  \n  const user = await prisma.user.findUnique({\n    where: { id: session.user.id },\n    select: { role: true, organizationId: true },\n  });\n  \n  return user;\n}\n\nexport default async function PerformancePage() {\n  const user = await checkPerformanceAccess();\n  \n  if (!user) {\n    redirect('/auth/login');\n  }\n  \n  // Only admins and managers can access performance dashboard\n  if (user.role !== 'ADMIN' && user.role !== 'MANAGER') {\n    redirect('/dashboard');\n  }\n  \n  return <PerformanceDashboard />;\n}\n"