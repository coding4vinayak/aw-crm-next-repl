import { Metadata } from 'next';\nimport { ProfileForm } from '@/components/auth/profile-form';\nimport { MFASetup } from '@/components/auth/mfa-setup';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/lib/auth';\nimport { prisma } from '@awcrm/database';\nimport { notFound } from 'next/navigation';\n\nexport const metadata: Metadata = {\n  title: 'Profile',\n  description: 'Manage your profile',\n};\n\nasync function getUserProfile() {\n  const session = await getServerSession(authOptions);\n  \n  if (!session?.user?.email) {\n    return null;\n  }\n  \n  const user = await prisma.user.findUnique({\n    where: {\n      email: session.user.email,\n    },\n    select: {\n      id: true,\n      firstName: true,\n      lastName: true,\n      email: true,\n      role: true,\n      mfaEnabled: true,\n    },\n  });\n  \n  return user;\n}\n\nexport default async function ProfilePage() {\n  const user = await getUserProfile();\n  \n  if (!user) {\n    notFound();\n  }\n  \n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Profile</h1>\n        <p className=\"text-muted-foreground\">\n          Manage your account settings and preferences.\n        </p>\n      </div>\n      <div className=\"grid gap-6\">\n        <ProfileForm user={user} />\n        <MFASetup \n          isEnabled={user.mfaEnabled} \n          onStatusChange={() => window.location.reload()} \n        />\n      </div>\n    </div>\n  );\n}\n"