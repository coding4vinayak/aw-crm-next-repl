import { NextRequest, NextResponse } from 'next/server';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/lib/auth';\nimport { prisma } from '@awcrm/database';\n\nexport async function PUT(req: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions);\n\n    if (!session?.user?.email) {\n      return NextResponse.json(\n        { message: 'Unauthorized' },\n        { status: 401 }\n      );\n    }\n\n    const { firstName, lastName } = await req.json();\n\n    // Update user profile\n    const updatedUser = await prisma.user.update({\n      where: {\n        email: session.user.email,\n      },\n      data: {\n        firstName,\n        lastName,\n      },\n      select: {\n        id: true,\n        firstName: true,\n        lastName: true,\n        email: true,\n        role: true,\n      },\n    });\n\n    return NextResponse.json(\n      { message: 'Profile updated successfully', user: updatedUser },\n      { status: 200 }\n    );\n  } catch (error) {\n    console.error('Update profile error:', error);\n    return NextResponse.json(\n      { message: 'An error occurred while updating your profile' },\n      { status: 500 }\n    );\n  }\n}\n"